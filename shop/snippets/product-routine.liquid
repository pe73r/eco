{%- assign collection = collections[product.handle] -%}

<div class="Product__RoutinesInner">
  <div class="Product__RoutinesTop">
    <h2 class="title_upper hidden">{{ 'product.routine.product_included' | t }}</h2>
    {%- if collection.products_count > 0 -%}
        <div class="ProductListWrapper">
          <div class="ProductList ProductList--grid Grid" data-mobile-count="2" data-desktop-count="4">
            {%- for product in collection.products -%}
              <div class="Grid__Cell 1/2--phone 1/2--tablet-and-up 1/3--lap-and-up">
                {%- include 'product-item', show_product_info: true, show_vendor: false, show_color_swatch: false, show_labels: true -%}
              </div>
            {%- endfor -%}
          </div>
        </div>
    {%- else -%}
      <div class="EmptyState">
        <div class="Container">
          <h1 class="EmptyState__Title Heading u-h5">{{ 'collection.general.no_products' | t }}</h1>
          <button class="EmptyState__Action Button Button--primary" data-action="reset-tags">{{ 'collection.general.reset' | t }}</button>
        </div>
      </div>
    {%- endif -%}
  </div>
  <div class="Product__RoutinesBottom">
    <div class="Product__RoutinesBottomLeft">
      <h2 class="title_upper">{{ 'product.routine.care' | t }}</h2>
      {%- for product in collection.products -%}
      	<p class="Text--subdued">{{ product.title }}</p>
      {%- endfor -%}
    </div>
    <div class="Product__RoutinesBottomRight">
      <h2 class="title_upper">{{ 'product.routine.steps' | t }}</h2>
      {%- for product in collection.products -%}
      	<div class="Step">
          <p class="number Text--subdued">{% if forloop.index < 10 %}0{% endif %}{{ forloop.index }}</p>
          <p>{{ product.metafields.global.routine }}</p>
      	</div>
      {%- endfor -%}
    </div>
  </div>
</div>